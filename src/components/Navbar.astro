---
import Menu from "@/components/icons/Menu.astro";
import Close from "@/components/icons/Close.astro";

const navLinks = [
  { href: "/about", text: "About" },
  { href: "https://tsuramii.github.io/online-cv/", text: "CV" },
];
const contactLinks = [
  { href: "mailto:lucanahtsu@gmail.com", text: "Email" },
  { href: "https://github.com/tsuramii", text: "GitHub" },
  {
    href: "https://www.linkedin.com/in/luca-di-marco/",
    text: "LinkedIn",
  },
];
---

<nav
  class="lg:max-w-[250px] lg:h-svh lg:border-r-2 p-5 fixed top-0 left-0 w-full bg-gradient-to-b from-background from-[89%] to-90% lg:bg-background z-10">
  <div class="flex items-center justify-between">
    <a
      class="text-xl font-bold rounded-lg hover:translate-x-1 text-secondary transition-all"
      href="#">Luca<br />Di&nbsp;Marco</a
    >
    <button
      class="lg:hidden p-2 stroke-primary [&>svg]:w-8 [&>svg]:h-8 transition-opacity ease-in-out">
      <Menu className="menu" />
      <Close className="close hidden" />
    </button>
  </div>
  <ul
    id="nav-menu"
    class="text-secondary lg:py-2 lg:pr-24 transition-all duration-300 ease-in-out max-h-0 lg:max-h-full lg:opacity-100 overflow-hidden opacity-0 flex flex-col items-center justify-center lg:items-start text-xl [&>li]:py-4 border-b-2 border-muted">
    {
      navLinks.map((link) => (
        <li>
          <a
            href={link.href}
            class="relative lg:after:content-[''] lg:after:absolute lg:after:-bottom-1 lg:after:left-0 lg:after:w-[10px] lg:after:h-[2px] lg:after:rounded-lg lg:after:bg-muted lg:after:hover:w-full lg:after:transition-all duration-300 ease-in-out  ">
            {link.text}
          </a>
        </li>
      ))
    }
  </ul>
  <h2 class="uppercase text-muted/80 tracking-wider pt-6 hidden lg:block">
    Contact
  </h2>
  <ul
    class="hidden lg:flex text-secondary pb-6 lg:pr-24 flex-col justify-center items-start text-sm [&>li]:py-1 border-b-2 border-muted">
    {
      contactLinks.map((link) => (
        <li>
          <a
            href={link.href}
            class="text-primary hover:text-muted/70 transition-colors ">
            {link.text}
          </a>
        </li>
      ))
    }
  </ul>
</nav>

<style>
  .open {
    @apply max-h-[200px] opacity-100;
  }
</style>

<script>
  const toggle = document.querySelector("button");
  const menu = document.querySelector("ul");
  const [menuIcon, closeIcon] = document.querySelectorAll("button > svg");

  toggle?.addEventListener("click", () => {
    toggle?.classList.toggle("opacity-0");
    setTimeout(() => {
      menuIcon.classList.toggle("hidden");
      closeIcon.classList.toggle("hidden");
      menu?.classList.toggle("open");
      toggle?.classList.toggle("opacity-0");
    }, 150);
  });
</script>
